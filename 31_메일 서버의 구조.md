# 31. 메일 서버의 구조

### 1. 메일 송수신 구조
- 메일을 송수신하려면 **클라이언트 측의 메일 프로그램**과 **서버 측의 메일 서버 프로그램** 간에 통신을 해야 한다.
- 메일 송수신에 사용되는 프로토콜은 두 가지 종류가 있다.
  - 메일 송신 프로토콜 : SMTP (포트 25)
  - 메일 수신 프로토콜 : POP3 (포트 110)
</br>

### 2. SMTP에 의한 메일 송신과 메일 전송
- 메일 송신은 SMTP 25번 포트를 사용한다.
- 메일 서버 간에도 SMTP를 사용하여 메일을 전송한다.
</br>

- 컴퓨터 ---*25번포트*---> 메일서버 동작 흐름
  - (1) 세션 시작을 통지
  - (2) 송신자의 메일 주소를 통지한다
  - (3) 목적지 메일 주소를 통지한다
  - (4) 메일 본문 전송을 통지한다
  - (5) 메일 본문을 송신한다
  - (6) 세션 종료를 통지한다.
</br>

### 3. POP3에 의한 메일 수신
- 메일 수신은 POP3 110번 포트를 사용한다.
- 메일 서버에는 메일을 보관해주는 **메일 박스** 기능이 존재한다.
- 메일을 수신할 때는 사용자 이름과 비밀번호를 이용한 **사용자인증**이 필요하다.
</br>

- 컴퓨터 ---*110번 포트*--- 메일서버 동작 흐름
  - (1) 세션 시작
  - (2) 컴퓨터는 수신자의 사용자 이름을 통지 + 서버는 OK 확인 응답 반환
  - (3) 수신자의 비밀번호를 통지 + 서버는 OK 확인 응답 반환
  - (4) 컴퓨터는 메일을 확인 + 메일서버는 '있음' 확인 응답 반환
  - (5) 컴퓨터는 메일의 전송을 요청 + 서버는 메일박스에 보관된 메일 전송
  - (6) 세션 종료
